<%- include('partials/header') -%>
<%- include('partials/btmLeftTxt') -%>
<%- include('partials/darkMode') -%>
<%- include('partials/navBar') -%>
<main class="d-flex flex-column justify-content-center">
  <section>
    <div class="d-flex flex-row justify-content-center ">
      
    </div>
    
    <div class="d-flex flex-row justify-content-center">
      
      <div class="col-3">
          <h1 class="ts">Edit Profile</h1>
          <p><strong>Name:</strong> <%= displayedUser.name %></p>
          <p><strong>Email:</strong> <%= displayedUser.email %></p>
          <div class="position-relative">
            <i class="position-absolute bottom-0 start-0 ms-2 mb-2 fa fa-cog fa-2x text-primary" id="imgCog"></i>
            <img class="img-fluid rounded-5" src="<%= displayedUser.image %>" alt="Picture Of <%= displayedUser.name %>">
          </div>
          <h3 class="mt-5"><a class="text-decoration-none text-dark" href="/update">Update Password</a></h3>
          <h3 class="mt-3"><a class="text-decoration-none text-dark" href="#">Setup 2FA</a></h3>
      </div>
      <div class="col-3 mx-5 cmt-1">
        <h3 class="">Phone Number</h3>

        <form action="/update/userProfile/<%= displayedUser._id %>?_method=PUT" method="POST"> <!-- enctype="multipart/form-data" -->
          <div class="mb-3">
            <input type="text" class="form-control" value="<%= displayedUser.phoneNumber %>" id="phoneNumber" name="phoneNumber">
          </div>
          <div class="mb-3 form-check form-switch">
            <label for="txtOk" class="form-label">Text Message Ok?</label>
            <input 
              class="form-check-input" 
              type="checkbox" 
              id="txtOk" 
              name="txtOk" 
              <% if(displayedUser.txtOk == true) {%>checked<%}%>>
          </div>
          <div class="mb-3">
            <h3>Bio</h3>
            <textarea class="form-control bioForm" id="bioForm" name="bioForm"><%= displayedUser.bio %></textarea>
          </div>
          <div class="mb-3">
            <h3>I can Help with</h3>
            <textarea class="form-control bioForm" id="iCanHelpWith" name="iCanHelpWith"><%= displayedUser.iCanHelpWith %></textarea>
          </div>
      </div>
      <div class="col-3 cmt-1 position-relative">
        <h3 class="">Mailing Address</h3>
          <div class="mb-3">
              <input type="text" class="form-control"       value="<%= displayedUser.address1 %>"  id="address1" name="address1">
              <input type="text" class="form-control mt-2"  value="<%= displayedUser.address2 %>"  id="address2" name="address2">
              <input type="text" class="form-control mt-2"  value="<%= displayedUser.city %>"      id="City"     name="city">
              <input type="text" class="form-control mt-2"  value="<%= displayedUser.province %>"  id="province" name="province">
              <input type="text" class="form-control mt-2"  value="<%= displayedUser.country %>"   id="country"  name="country">
              <input type="text" class="form-control mt-2"  value="<%= displayedUser.postCode %>"  id="postCode" name="postCode">
          </div>
          <button type="submit" class="position-absolute btn btn-primary col-4 bottom-0 end-0 me-2 mb-2">Update</button>
        </form>

      </div>
    </div>
  </section>
<%- include('partials/imageUpload') -%>
</main>
<%- include('partials/footer') -%>